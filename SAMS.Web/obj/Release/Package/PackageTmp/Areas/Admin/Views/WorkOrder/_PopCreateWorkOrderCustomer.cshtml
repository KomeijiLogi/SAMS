@model SAMS.Web.Areas.Admin.Models.WorkOrder.PopCreateViewModel

<!--布局 -->

<div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
    <h4 class="modal-title">新建工单</h4>
</div>
<form action="/admin/workorder/popcreateworkordercustomer" class="form-horizontal" data-ajax="true" data-ajax-begin="showPopLoading" data-ajax-complete="hidePopLoading" data-ajax-failure="showException" data-ajax-success="editWorkOrderSucess" id="editWorkOrderForm" method="post">


    <input id="WorkOrder_CustomerID" name="WorkOrder.CustomerID" type="hidden" value="" />
    <input id="Customer_ID" name="Customer.ID" type="hidden" value="" />    
    <div class="modal-body">
        <div class="panel panel-default">
            <div class="panel-heading">
                客户资料
            </div>
            <div class="panel-body">
                <div class="form-group">
                    <div class="col-md-6">
                        <label class="control-label pull-left single-word">客户名称<span class="required">*</span></label>
                        <div class="col-md-10 clear-md-padding">
                            <input class="form-control" data-val="true" data-val-length="名称长度不能超过50个字符" data-val-length-max="50" data-val-regex="不能包含空字符" data-val-regex-pattern="^[^\s]+$" data-val-required="名称不能为空"
                                   id="Customer_Name" name="Customer.Name" placeholder="请输入客户名称" type="text" value="" />
                            <span class="field-validation-valid esh-error-lable" data-valmsg-for="Customer.Name" data-valmsg-replace="true"></span>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <label class="control-label pull-left single-word">所属区域<span class="required">*</span></label>
                        <div class="col-md-10 clear-padding-right" name="area">
                            <div class="col-md-4 clear-padding-left">
                                <select class="form-control select2" id="sel_pro" name="sel_pro" data_val="true" data_val_required="区域不能为空">
                                    <option value="">省份</option>
                                </select>
                            </div>
                            <div class="col-md-4 clear-padding-left">
                                <select class="form-control select2" id="sel_city" name="sel_city" data-val="true" data-val-required="区域不能为空">
                                    <option value="">城市</option>
                                </select>
                            </div>
                            <div class="col-md-4 clear-padding-left">
                                <select class="form-control select2" id="sel_distr" name="sel_distr" data-val="true" data-val-required="区域不能为空">
                                    <option value="">区县</option>
                                </select>
                            </div>
                            <div class="clearfix">
                                <span class="field-validation-valid esh-error-lable" data-valmsg-for="Customer.Area" data-valmsg-replace="true"></span>
                                <input class="esh-hide-area" data-val="true" data-val-length="区域长度不能超过50个字符" data-val-length-max="50" data-val-required="区域不能为空" id="Customer_Area" name="Customer.Area" type="text" value="" />
                            </div>
                        </div>
                    </div>

                </div>
             
                <div class="form-group">
                    <div class="col-md-6">
                        <label class="control-label pull-left single-word">科室</label>
                        <div class="col-md-10 clear-md-padding">
                            <input class="form-control" data-val="true" data-val-length="科室长度不能超过20个字符"
                                   data-val-length-max="20" data-val-regex="不能包含空字符" data-val-regex-pattern="^[^\s]+$"
                                   id="WorkOrder_Office"
                                   name="Customer.Office" placeholder="请输入科室" type="text" value="" />
                            <span class="field-validation-valid esh-error-lable"
                                  data-valmsg-for="WorkOrder.Office" data-valmsg-replace="true"></span>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <label class="control-label pull-left single-word">联系人</label>
                        <div class="col-md-10 clear-md-padding">
                            <input class="form-control" data-val="true" data-val-regex="不能包含空字符"
                                   data-val-regex-pattern="^[^\s]+$" id="WorkOrder_OfficePerson" name="Customer.OfficePerson"
                                   placeholder="请输入联系人" type="text" value="" />
                            <span class="field-validation-valid esh-error-lable" data-valmsg-for="WorkOrder.OfficePerson"
                                  data-valmsg-replace="true"></span>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-6">
                        <label class="control-label pull-left single-word">职务</label>
                        <div class="col-md-10 clear-md-padding">
                            <input class="form-control" data-val="true" data-val-length="职务长度不能超过20个字符"
                                   data-val-length-max="20" data-val-regex="不能包含空字符" data-val-regex-pattern="^[^\s]+$"
                                   id="WorkOrder_OfficePosition"
                                   name="Customer.OfficePosition" placeholder="请输入职务" type="text" value="" />
                            <span class="field-validation-valid esh-error-lable"
                                  data-valmsg-for="WorkOrder.OfficePosition" data-valmsg-replace="true"></span>
                        </div>
                    </div>
                    <div class="col-md-6" style="display:none;">
                        <label class="control-label pull-left single-word">电话</label>
                        <div class="col-md-10 clear-md-padding">
                            <input class="form-control" data-val="true"
                                   id="WorkOrder_OfficeTel" name="Customer.OfficeTel"
                                   placeholder="请输入联系人电话" type="text" value="" />
                            <span class="field-validation-valid esh-error-lable" data-valmsg-for="WorkOrder.OfficeTel"
                                  data-valmsg-replace="true"></span>
                        </div>
                    </div>
                </div>
                <div class="form-group">

                    <div class="col-md-6">
                        <label class="control-label pull-left single-word">电话</label>
                        <div class="col-md-10 clear-md-padding">
                            <input class="form-control" data-val="true" data-val-regex="联系人手机格式不正确"
                                   data-val-regex-pattern="^([1][3-8]\d{9})|((\d{3,4}-)?\d{6,8})$"
                                   id="WorkOrder_OfficeMobile" name="Customer.OfficeMobile" placeholder="联系人手机" type="text" value="" />
                            <span class="field-validation-valid esh-error-lable"
                                  data-valmsg-for="WorkOrder.OfficeMobile" data-valmsg-replace="true"></span>
                        </div>
                    </div>
                </div>
             
                <div class="form-group">
                    <div class="col-md-6">
                        <label class="control-label pull-left single-word">详细地址</label>
                        <div class="col-md-10  clear-md-padding">
                            <textarea class="form-control" cols="20" data-val="true" data-val-length="地址长度不能超过100个字符"
                                      data-val-length-max="100" data-val-regex="不能包含空字符"
                                      data-val-regex-pattern="^[^\s]+$"
                                      id="Customer_Address" name="Customer.Address" placeholder="详细地址信息100个字以内" rows="3"></textarea>
                            <span class="field-validation-valid esh-error-lable" data-valmsg-for="Customer.Address" data-valmsg-replace="true"></span>
                        </div>
                    </div>
                </div>

            </div>
        </div>
        <div class="panel panel-default">
            <div class="panel-heading">
                业务信息
            </div>
            <div class="panel-body">
                <div class="form-group">
                    <div class="col-md-6">
                        <label class="control-label pull-left single-word">产品名称<span class="required">*</span></label>
                        <div class="col-md-10 clear-md-padding">
                            @Html.DropDownList("ProductName", Model.ProductItemList.Distinct(), "选择产品名称", new { @class = "form-control" })
                            
                            <input id="productdata" name="productdata" type="hidden" value='@Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(Model.Products))' />

                            <input class="esh-hide-area" data-val="true" data-val-required="请选择产品名称和产品型号" id="WorkOrder_ProductID" name="WorkOrder.ProductID" type="text" value="" />
                            <span class="field-validation-valid esh-error-lable" data-valmsg-for="WorkOrder.ProductID" data-valmsg-replace="true"></span>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <label class="control-label pull-left single-word">产品型号<span class="required">*</span></label>
                        <div class="col-md-10 clear-md-padding">
                            <select id="ProductType" name="ProductType" class="form-control"><option value="">选择产品型号</option></select>

                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-6">
                        <label class="control-label pull-left single-word">工单类型<span class="required">*</span></label>
                        <div class="col-md-10  clear-md-padding">
                            <select id="ServiceType" name="ServiceType" class="form-control">
                                <option value="">选择工单类型</option>
                                <option value="2">维修</option>
                                <option value="1">安装</option>
                            </select>
                            <input class="esh-hide-area" data-val="true" data-val-required="工单类型不能为空" id="WorkOrder_ServiceTypeID" name="WorkOrder.ServiceTypeID" type="text" value="" />
                            <span class="field-validation-valid esh-error-lable" data-valmsg-for="WorkOrder.ServiceTypeID" data-valmsg-replace="true"></span>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <label class="control-label pull-left single-word">设备编号</label>
                        <div class="col-md-10 clear-md-padding">
                            <input id="WorkOrder.SerialNo" name="WorkOrder.SerialNo" class="form-control"/>

                        </div>
                    </div>
                    @*<div class="col-md-6">
                        <label class="control-label pull-left single-word">优先级<span class="required">*</span></label>
                        <div class="col-md-10 clear-md-padding">
                            <select id="WorkOrder_Priority" name="WorkOrder.Priority" class="form-control">
                                <option value="1">一般</option>
                                <option value="2">紧急</option>
                                <option value="3">非常紧急</option>
                            </select>
                        </div>
                    </div>*@
                </div>
            
                <div class="form-group">
                    <div class="col-md-6">
                        <label class="control-label pull-left single-word">申告人</label>
                        <div class="col-md-10 clear-md-padding">
                            <input class="form-control" data-val="true" data-val-length="申告人长度不能超过20个字符" 
                                   data-val-length-max="20" data-val-regex="不能包含空字符" data-val-regex-pattern="^[^\s]+$" 
                                   @*data-val-required="业务员不能为空"*@ 
                                   id="WorkOrder_SaleMan" 
                                   name="WorkOrder.SaleMan" placeholder="请输入申告人" type="text" value="" />
                            <span class="field-validation-valid esh-error-lable" data-valmsg-for="WorkOrder.SaleMan" data-valmsg-replace="true"></span>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <label class="control-label pull-left single-word">申告人电话</label>
                        <div class="col-md-10 clear-md-padding">
                            <input class="form-control" data-val="true" data-val-regex="申告人电话格式不正确" 
                                   data-val-regex-pattern="^([1][3-8]\d{9})|((\d{3,4}-)?\d{6,8})$" 
                                   id="WorkOrder_SaleManPhone" name="WorkOrder.SaleManPhone" placeholder="请输入申告人电话" type="text" value="" />
                            <span class="field-validation-valid esh-error-lable" data-valmsg-for="WorkOrder.SaleManPhone" data-valmsg-replace="true"></span>
                        </div>
                    </div>
                </div>
               
                <div class="form-group ">
                    <div class="col-md-12">
                        <label class="control-label pull-left single-word">服务描述</label>
                        <div class="col-md-11 clear-md-padding">
                            <textarea class="form-control" cols="20" data-val="true" data-val-length="描述长度不能超过500个字符" data-val-length-max="500" id="WorkOrder_Description" name="WorkOrder.Description" placeholder="问题描述500个字以内" rows="3"></textarea>
                            <span class="field-validation-valid esh-error-lable" data-valmsg-for="WorkOrder.Description" data-valmsg-replace="true"></span>
                        </div>
                    </div>
                </div>
                

            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" data-dismiss="modal" class="btn btn-default">取消</button>
        <button type="button" onclick="submitWorkOrderForm()" class="btn green">保存</button>
    </div>
    
</form>
