
@model SAMS.Web.Areas.Admin.Models.Personal.EditPasswordViewModel
<!-- BEGIN PAGE CONTENT-->
<div class="row">

    <div class="col-md-12">

        <div class="side-menu-sidebar ">
            <div class="portlet portlet-nav">
                <div class="portlet-title">
                    <div class="caption" data-toggle="collapse" data-target="#lst1">
                        <span class="uppercase">个人设置</span>
                        <a href="javascript:;" class="caption-helper visible-sm-inline-block visible-xs-inline-block">单击展示列表</a>
                    </div>
                    <div class="btn-group pull-right esh-set-btn-group">
                        <a href="javascript:;" class="esh-set-group" data-hover="dropdown" data-toggle="dropdown" aria-expanded="false">
                            <i class="fa  fa-reply  back"></i>
                        </a>
                        <ul class="esh-pub-menu dropdown-menu pull-right">
                            <li>

                                <a href="/admin/systemsetting">
                                    返回设置主页
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="portlet-body side-menu-project-list-content" id="lst1">
                    <div class="side-menu-project-list" data-always-visible="1" data-rail-visible1="1">
                        <ul class="nav nav-pills nav-stacked">
                            @*<li class="">
                                <a href="/admin/personal">个人资料</a>
                            </li>*@
                            <li class="active">
                                <a href="/admin/personal/editpassword">修改密码</a>
                            </li>
                            @*<li class="">
                                <a href="/admin/personal/edittheme">主题设置</a>
                            </li>*@
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="side-menu-content">
            <div class="portlet light">
                <div class="portlet-title">
                    <div class="caption title">
                        修改密码
                    </div>
                </div>
                <div class="portlet-body">
                    <form action="/admin/personal/editpassword" class="form-horizontal" data-ajax="true" data-ajax-begin="showLoading" data-ajax-complete="hideLoading" data-ajax-failure="showException" data-ajax-success="editSucess" id="editForm" method="post">
                        <input id="ID" name="ID" type="hidden" value="@Model.ID" />                        <div class="esh-setting-pwd">
                            <div class="form-group">
                                <label class="control-label  col-md-1">当前密码</label>
                                <div class="col-md-3">
                                    <input class="form-control" data-val="true" data-val-length="密码的长度必须在6-20个字符之间" data-val-length-max="20" 
                                           data-val-length-min="6" data-val-regex="不能包含空字符" 
                                           data-val-regex-pattern="^[^\s]+$" data-val-remote="原密码不正确！" 
                                           data-val-remote-additionalfields="*.OldPwd" data-val-remote-url="/admin/personal/checkpwd" 
                                           data-val-required="原密码不能为空" 
                                           id="OldPwd" name="OldPwd" placeholder="请输入您的当前密码" type="password" />
                                    <span class="field-validation-valid esh-error-lable" data-valmsg-for="OldPwd" data-valmsg-replace="true"></span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-1">新密码</label>
                                <div class="col-md-3">
                                    <input class="form-control" data-val="true" data-val-length="密码的长度必须在6-20个字符之间" data-val-length-max="20" data-val-length-min="6" data-val-regex="不能包含空字符" data-val-regex-pattern="^[^\s]+$" data-val-required="新密码不能为空" id="NewPwd" name="NewPwd" placeholder="请输入您的新密码" type="password" />
                                    <span class="field-validation-valid esh-error-lable" data-valmsg-for="NewPwd" data-valmsg-replace="true"></span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-1">确认密码</label>
                                <div class="col-md-3">
                                    <input class="form-control" data-val="true" data-val-equalto="密码必须一致" data-val-equalto-other="*.NewPwd" id="ConfirmPwd" name="ConfirmPwd" placeholder="请确认您的新密码" type="password" />
                                    <span class="field-validation-valid esh-error-lable" data-valmsg-for="ConfirmPwd" data-valmsg-replace="true"></span>
                                    <span id="confirmpwd_val" class="esh-error-lable hidden">确认密码与新密码不一致</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-1"></label>
                                <div class="col-md-3">
                                    <button type="submit" class="btn green">确定</button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

</div>
<!-- END PAGE CONTEN -->
@section Scripts
{
<script type="text/javascript">
    function editSucess(data) {
        if (data == "ok") {
            growlAlert.success("修改成功,请重新登录！");
            setTimeout("window.location='/account/logout'", 1500);
        }
        else { growlAlert.danger("修改失败"); }
    }
</script>
    }

